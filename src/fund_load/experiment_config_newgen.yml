version: 1

scenario:
  name: exp_mp
  description: "Experimental Monday multiplier + prime gate (newgen config)"

runtime:
  strict: true
  tracing:
    enabled: false
  discovery_modules:
    - fund_load

nodes:
  compute_time_keys:
    week_start: MON

  compute_features:
    monday_multiplier:
      enabled: true
      multiplier: 2.0
      apply_to: amount
    prime_gate:
      enabled: true
      global_per_day: 1
      amount_cap: 9999.00

  evaluate_policies:
    limits:
      daily_amount: 5000.00
      weekly_amount: 20000.00
      daily_attempts: 3
    prime_gate:
      enabled: true
      global_per_day: 1
      amount_cap: 9999.00

  update_windows:
    daily_attempts:
      enabled: true
    daily_accepted_amount:
      enabled: true
    weekly_accepted_amount:
      enabled: true
    daily_prime_gate:
      enabled: true

adapters:
  source:
    settings:
      path: input.txt
      format: text/jsonl
      encoding: utf-8
      decode_errors: strict
    binds:
      - stream
  sink:
    settings:
      path: output_exp_mp.txt
      format: text/jsonl
      encoding: utf-8
    binds:
      - stream
